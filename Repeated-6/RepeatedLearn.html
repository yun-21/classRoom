<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>커피 만드는 과정</title>
</head>
<body>
    <div id="root"></div>
    <script>
        // 커피 과정 데이터
        // @type {Object[]}
        // @description 각 커피 과정의 이름, 소요 시간, 품질을 포함한 객체 배열입니다.
        // @check order 1
        const coffeeData = [
            { stage: 'bean selection', time: 10, quality: 'high' },
            { stage: 'roasting', time: 20, quality: 'high' },
            { stage: 'grinding', time: 5, quality: 'medium' },
            { stage: 'brewing', time: 15, quality: 'high' },
            { stage: 'serving', time: 2, quality: 'high' },
        ];

        // 커피 과정을 처리하는 함수
        // @param {Object[]} data - 커피 과정 데이터
        // @returns {void}
        // @description 주어진 커피 과정 데이터를 이용해 각 과정을 소문자로 변환하고, 고품질 과정을 필터링하며, 총 소요 시간을 계산하여 화면에 출력합니다.
        // @check order 2
        // @breakpoint 커피 과정 데이터가 소문자로 변환되는 부분에서 중단점을 설정합니다.
        // @breakpoint 고품질 과정이 필터링되는 부분에서 중단점을 설정합니다.
        // @breakpoint 총 소요 시간이 계산되는 부분에서 중단점을 설정합니다.

        function coffeeFunc(data) {
            //각 과정의 이름을 소문자로 변환
            const stages = data.map((item) => {
                const stageLowerCase = item.stage.toUpperCase();
                return stageLowerCase;
            });
            console.log('과정들:', stages);

            //품질이 'high'인 과정들만 필터링
            const highQualityStages = data.filter((item) => {
                const isHightQuality = item.quality ==='high'; //boolean
                return isHightQuality;
            });
            console.log('고품질 과정들:', highQualityStages);
            console.table(highQualityStages);

            //총 소요 시간을 계산
            const totalTime = data.reduce((acc, item) => {
                const newTotalTime = acc + item.time;
                return newTotalTime;
            }, 0);
            console.log('총 소요 시간:', totalTime);

            //결과를 DOM에 출력
            const root = document.getElementById('root');
            root.innerHTML = `
                <h1>커피 만드는 과정</h1>
                <p><strong>과정들:</strong> ${stages.join(', ')}</p>
                <p><strong>고품질 과정들:</strong> ${highQualityStages.map((item) => {
                    return item.stage.toLowerCase();
                }).join(', ')}</p>
                <p><strong>총 소요 시간:</strong> ${totalTime} 분</p>
            `;
        }
        coffeeFunc(coffeeData);
    </script>
</body>
</html>